<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ciberseguridad - Centro Universitario Jos√© Vasconcelos</title>
    <style>
        /* --- ESTILOS GENERALES (Tema Oscuro Ciberseguridad) --- */
        :root {
            --fondo: #0f172a;       /* Azul muy oscuro */
            --tarjeta: #1e293b;     /* Azul gris√°ceo */
            --texto: #e2e8f0;       /* Blanco humo */
            --acento: #38bdf8;      /* Azul ne√≥n brillante */
            --peligro: #ef4444;     /* Rojo para alertas */
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--fondo);
            color: var(--texto);
            line-height: 1.6;
        }

        /* --- ENCABEZADO --- */
        header {
            background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
            padding: 30px 20px;
            text-align: center;
            border-bottom: 2px solid var(--acento);
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.2);
        }

        header h1 {
            margin: 0;
            font-size: 1.8rem;
            color: var(--acento);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        header h2 {
            margin: 10px 0 0 0;
            font-size: 1.5rem;      /* M√°s grande */
            font-weight: bold;      /* Letra gruesa (Potente) */
            color: #ffffff;         /* Blanco puro */
            text-shadow: 0 0 10px rgba(56, 189, 248, 0.5); /* Un brillo suave azul */
            opacity: 1;             /* Sin transparencia */
}


        header p {
            margin: 5px 0 0 0;
            font-size: 0.9rem;
            opacity: 0.7;
            font-style: italic;
        }

        /* --- CONTENEDOR PRINCIPAL --- */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* --- INTRODUCCI√ìN --- */
        .intro-section {
            text-align: center;
            margin-bottom: 50px;
            padding: 20px;
            border-radius: 15px;
            background: rgba(30, 41, 59, 0.5); /* Fondo semitransparente */
            border: 1px solid #334155;
        }

        .intro-section h2 {
            color: #fff;
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .intro-section p {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
            color: #cbd5e1;
        }

        .highlight {
            color: var(--acento);
            font-weight: bold;
        }

        /* --- GRID DE BOTONES (TARJETAS) --- */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Responsivo autom√°tico */
            gap: 25px;
        }

        .card {
            background-color: var(--tarjeta);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #334155;
            position: relative;
            overflow: hidden;
            text-decoration: none; /* Para cuando sean enlaces <a> */
            display: block;
        }

        /* Efecto al pasar el mouse */
        .card:hover {
            transform: translateY(-10px); /* Sube un poco */
            border-color: var(--acento);
            box-shadow: 0 0 25px rgba(56, 189, 248, 0.3); /* Resplandor ne√≥n */
        }

        .card-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
        }

        .card h3 {
            margin: 10px 0;
            color: #fff;
            font-size: 1.4rem;
        }

        .card p {
            font-size: 0.9rem;
            color: #94a3b8;
            margin: 0;
        }

        /* --- FOOTER --- */
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 50px;
            font-size: 0.8rem;
            opacity: 0.6;
            border-top: 1px solid #334155;
        }

        /* Ajuste para m√≥viles */
        @media (max-width: 600px) {
            header h1 { font-size: 1.4rem; }
            .intro-section h2 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <header>
        <h1>Centro Universitario Jos√© Vasconcelos</h1>
        <h2>Ciberseguridad</h2>
        <p>Reynosa, Tamaulipas</p>
    </header>

    <div class="container">
        
        <section class="intro-section">
            <h2>El Peligro Invisible</h2>
            <p>
                Vivimos conectados, pero rara vez nos detenemos a pensar en qui√©n nos observa desde las sombras digitales. 
                No proteger nuestros datos es como dejar la puerta de casa abierta de par en par. 
                En internet habitan <span class="highlight">amenazas silenciosas</span> dise√±adas para robar tu identidad, 
                tu dinero y tu tranquilidad. Conocer al enemigo es el primer paso para defenderse.
            </p>
        </section>

        <div class="menu-grid">
            
            <a href="phishing.html" class="card">

                <span class="card-icon">üé£</span>
                <h3>Phishing</h3>
                <p>El arte del enga√±o para robar tus contrase√±as.</p>
            </a>

            <a href="malware.html" class="card">
                <span class="card-icon">ü¶†</span>
                <h3>Malware</h3>
                <p>Software malicioso, virus y troyanos.</p>
            </a>

            <a href="ingenieria_social.html" class="card">
                <span class="card-icon">üé≠</span>
                <h3>Ingenier√≠a Social</h3>
                <p>Manipulaci√≥n psicol√≥gica para obtener informaci√≥n.</p>
            </a>

            <a href="spam_spim.html" class="card">
                <span class="card-icon">üìß</span>
                <h3>Spam</h3>
                <p>Correo basura masivo y no deseado.</p>
            </a>

            <a href="spam_spim.html" class="card">
                <span class="card-icon">üí¨</span>
                <h3>Spim</h3>
                <p>Spam a trav√©s de aplicaciones de mensajer√≠a instant√°nea.</p>
            </a>

            <a href="ransomware.html" class="card">
                <span class="card-icon">üîí</span>
                <h3>Ransomware</h3>
                <p>Secuestro de datos a cambio de un rescate monetario.</p>
            </a>

             <a href="robo_identidad.html" class="card">
                <span class="card-icon">üÜî</span>
                <h3>Robo de Identidad</h3>
                <p>Cuando alguien se hace pasar por ti ilegalmente.</p>
            </a>
            <div id="modal-acceso" style="
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: #000; z-index: 10000;
    display: flex; justify-content: center; align-items: center; flex-direction: column;
    font-family: 'Courier New', monospace;
">
    <div style="border: 2px solid #0f0; padding: 40px; text-align: center; background: rgba(0, 20, 0, 0.9); box-shadow: 0 0 50px rgba(0, 255, 0, 0.2);">
        <h2 style="color: #0f0; margin-top: 0; text-shadow: 0 0 10px #0f0;">‚ö†Ô∏è ACCESO RESTRINGIDO ‚ö†Ô∏è</h2>
        <p style="color: #fff;">Identif√≠cate para entrar al sistema:</p>
        <input type="text" id="input-nombre" placeholder="Nombre clave..." style="background: #000; border: 1px solid #0f0; color: #0f0; padding: 10px; font-size: 1.2rem; text-align: center; outline: none; margin-bottom: 20px;">
        <br>
        <button onclick="concederAcceso()" style="background: #0f0; color: #000; border: none; padding: 10px 30px; font-weight: bold; cursor: pointer;">ENTRAR >></button>
    </div>
</div>

<div id="modal-bitacora" style="
    display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.95); z-index: 9999;
    justify-content: center; align-items: center;
">
    <div style="
        width: 80%; max-width: 600px; height: 70%;
        border: 2px solid #0f0; background: #000;
        display: flex; flex-direction: column;
        font-family: 'Courier New', monospace;
    ">
        <div style="background: #0f0; color: #000; padding: 10px; font-weight: bold; display: flex; justify-content: space-between;">
            <span>>> SYSTEM_LOG.txt</span>
            <span style="cursor: pointer;" onclick="document.getElementById('modal-bitacora').style.display='none'">[X] CERRAR</span>
        </div>
        
        <div id="lista-visitantes" style="
            flex: 1; overflow-y: auto; padding: 20px; color: #0f0;
            text-align: left; font-size: 0.9rem;
        ">
            Cargando datos del servidor...
        </div>
    </div>
</div>

<div id="terminal-visitas" onclick="abrirBitacora()" style="
    position: fixed; bottom: 10px; right: 10px;
    background-color: rgba(0, 0, 0, 0.9); border: 1px solid #0f0; color: #0f0;
    padding: 5px 10px; font-family: 'Courier New', monospace; font-size: 0.8rem;
    border-radius: 5px; z-index: 9000; cursor: pointer;
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.5); display: none;
">
    <span style="animation: parpadeo 1s infinite;">‚óè</span> 
    AGENTE: <strong id="nombre-mostrado" style="color: #fff;">...</strong> | 
    VISITAS: <strong id="numero-visitas" style="color: #fff; text-decoration: underline;">0</strong>
    <span style="font-size: 0.7rem; color: #aaa;">(Ver Log)</span>
</div>

<style>
    @keyframes parpadeo { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
    /* Scrollbar hacker */
    #lista-visitantes::-webkit-scrollbar { width: 8px; }
    #lista-visitantes::-webkit-scrollbar-thumb { background: #0f0; }
    #lista-visitantes::-webkit-scrollbar-track { background: #000; }
</style>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, getCountFromServer, serverTimestamp, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // --- TUS CLAVES (NO TOCAR) ---
    const firebaseConfig = {
      apiKey: "AIzaSyB0ahP8K53dm8BIRhjXYxCbSJ8sNfQi-NI",
      authDomain: "refugio-de-patitas.firebaseapp.com",
      projectId: "refugio-de-patitas",
      storageBucket: "refugio-de-patitas.firebasestorage.app",
      messagingSenderId: "5921473252",
      appId: "1:5921473252:web:16f18c4c7cf1ad1509e2f1"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const coleccion = collection(db, "visitas_ciberseguridad");

    // --- 1. ENTRAR AL SITIO ---
    window.concederAcceso = async function() {
        const input = document.getElementById('input-nombre');
        const nombre = input.value.trim();

        if (nombre === "") { alert("‚ö†Ô∏è ERROR: Nombre requerido."); return; }

        document.getElementById('modal-acceso').style.display = 'none';
        document.getElementById('terminal-visitas').style.display = 'block';
        document.getElementById('nombre-mostrado').innerText = nombre.toUpperCase();
        sessionStorage.setItem('usuario_logueado', nombre);

        await registrarEnBaseDeDatos(nombre);
        actualizarContador();
    };

    async function registrarEnBaseDeDatos(nombre) {
        if (!sessionStorage.getItem('visita_guardada_db')) {
            try {
                await addDoc(coleccion, {
                    nombre_agente: nombre,
                    fecha: serverTimestamp(), // Guarda la hora del servidor
                    dispositivo: navigator.userAgent
                });
                sessionStorage.setItem('visita_guardada_db', 'true');
            } catch (e) { console.error("Error guardando:", e); }
        }
    }

    async function actualizarContador() {
        try {
            const snapshot = await getCountFromServer(coleccion);
            document.getElementById('numero-visitas').innerText = snapshot.data().count;
        } catch (e) { console.log("Error contando"); }
    }

    // --- 2. ABRIR BIT√ÅCORA (VER LISTA) ---
    window.abrirBitacora = async function() {
        // Mostrar ventana
        const modal = document.getElementById('modal-bitacora');
        const lista = document.getElementById('lista-visitantes');
        modal.style.display = 'flex';
        lista.innerHTML = "üì° Descifrando base de datos...<br><br>";

        try {
            // Pedimos todos los datos ordenados por fecha
            // NOTA: Si sale error en consola, es posible que Firebase pida crear un √≠ndice.
            // Si eso pasa, simplemente quitamos el orderBy.
            const q = query(coleccion, orderBy("fecha", "desc"));
            const querySnapshot = await getDocs(q);
            
            let html = "<table style='width:100%; border-collapse: collapse;'>";
            html += "<tr style='border-bottom: 1px dashed #0f0; text-align:left;'><th>FECHA/HORA</th><th>AGENTE</th></tr>";

            querySnapshot.forEach((doc) => {
                const data = doc.data();
                // Convertir fecha rara de Firebase a fecha normal
                let fechaTexto = "Desconocida";
                if(data.fecha) {
                    fechaTexto = new Date(data.fecha.seconds * 1000).toLocaleString();
                }
                
                html += `
                    <tr style='border-bottom: 1px solid #333;'>
                        <td style='padding: 8px 0; color: #aaa;'>[${fechaTexto}]</td>
                        <td style='padding: 8px 0; color: #0f0; font-weight:bold;'>${data.nombre_agente || "An√≥nimo"}</td>
                    </tr>
                `;
            });
            html += "</table>";
            lista.innerHTML = html;

        } catch (error) {
            console.error(error);
            lista.innerHTML = "‚ö†Ô∏è ERROR DE CONEXI√ìN: " + error.message + "<br>Intenta recargar.";
        }
    }

    // --- VERIFICAR SI YA ENTR√ì ANTES ---
    window.onload = function() {
        const usuarioGuardado = sessionStorage.getItem('usuario_logueado');
        if (usuarioGuardado) {
            document.getElementById('modal-acceso').style.display = 'none';
            document.getElementById('terminal-visitas').style.display = 'block';
            document.getElementById('nombre-mostrado').innerText = usuarioGuardado.toUpperCase();
            actualizarContador();
        }
    };
</script>


        </div>
    </div>

    <footer>
        <p>&copy; 2026 Proyecto Educativo de Ciberseguridad - ISC</p>
        <p>- Desarrollado por Jonathan Del Angel -</p>
    </footer>
    <div>
</div>
    <p>fin:(</p>
</body>
</html>
